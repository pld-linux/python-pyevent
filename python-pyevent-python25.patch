--- pyevent-0.3/event.c	2005-09-12 05:16:58.000000000 +0200
+++ pyevent-0.3/event.c.new	2008-01-30 21:34:35.203333139 +0100
@@ -1,17 +1,31 @@
-/* Generated by Pyrex 0.9.3 on Sun Sep 11 23:51:17 2005 */
+/* Generated by Pyrex 0.9.4.1 on Tue Aug  7 19:42:38 2007 */
 
+#define PY_SSIZE_T_CLEAN
 #include "Python.h"
 #include "structmember.h"
 #ifndef PY_LONG_LONG
   #define PY_LONG_LONG LONG_LONG
 #endif
+#if PY_VERSION_HEX < 0x02050000
+  typedef int Py_ssize_t;
+  #define PY_SSIZE_T_MAX INT_MAX
+  #define PY_SSIZE_T_MIN INT_MIN
+  #define PyInt_FromSsize_t(z) PyInt_FromLong(z)
+  #define PyInt_AsSsize_t(o)   PyInt_AsLong(o)
+#endif
+#ifdef __cplusplus
+#define __PYX_EXTERN_C extern "C"
+#else
+#define __PYX_EXTERN_C extern
+#endif
+__PYX_EXTERN_C double pow(double, double);
 #include "event.h"
 
 
 typedef struct {PyObject **p; char *s;} __Pyx_InternTabEntry; /*proto*/
 typedef struct {PyObject **p; char *s; long n;} __Pyx_StringTabEntry; /*proto*/
-static PyObject *__Pyx_UnpackItem(PyObject *, int); /*proto*/
-static int __Pyx_EndUnpack(PyObject *, int); /*proto*/
+static PyObject *__Pyx_UnpackItem(PyObject *, Py_ssize_t); /*proto*/
+static int __Pyx_EndUnpack(PyObject *, Py_ssize_t); /*proto*/
 static int __Pyx_PrintItem(PyObject *); /*proto*/
 static int __Pyx_PrintNewline(void); /*proto*/
 static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb); /*proto*/
@@ -20,7 +34,7 @@
 static PyObject *__Pyx_GetExcValue(void); /*proto*/
 static int __Pyx_ArgTypeTest(PyObject *obj, PyTypeObject *type, int none_allowed, char *name); /*proto*/
 static int __Pyx_TypeTest(PyObject *obj, PyTypeObject *type); /*proto*/
-static int __Pyx_GetStarArgs(PyObject **args, PyObject **kwds, char *kwd_list[], int nargs, PyObject **args2, PyObject **kwds2); /*proto*/
+static int __Pyx_GetStarArgs(PyObject **args, PyObject **kwds, char *kwd_list[], Py_ssize_t nargs, PyObject **args2, PyObject **kwds2); /*proto*/
 static void __Pyx_WriteUnraisable(char *name); /*proto*/
 static void __Pyx_AddTraceback(char *funcname); /*proto*/
 static PyTypeObject *__Pyx_ImportType(char *module_name, char *class_name, long size);  /*proto*/
@@ -35,13 +49,12 @@
 static PyObject *__pyx_b;
 static int __pyx_lineno;
 static char *__pyx_filename;
-staticforward char **__pyx_f;
+static char **__pyx_f;
 
 static char __pyx_mdoc[] = "event library\n\nThis module provides a mechanism to execute a function when a\nspecific event on a file handle, file descriptor, or signal occurs,\nor after a given time has passed.\n";
 
 /* Declarations from event */
 
-staticforward PyTypeObject __pyx_type_5event_event;
 
 struct __pyx_obj_5event_event {
   PyObject_HEAD
@@ -54,25 +67,21 @@
   struct timeval tv;
 };
 
-staticforward PyTypeObject __pyx_type_5event_read;
 
 struct __pyx_obj_5event_read {
   struct __pyx_obj_5event_event __pyx_base;
 };
 
-staticforward PyTypeObject __pyx_type_5event_write;
 
 struct __pyx_obj_5event_write {
   struct __pyx_obj_5event_event __pyx_base;
 };
 
-staticforward PyTypeObject __pyx_type_5event_signal;
 
 struct __pyx_obj_5event_signal {
   struct __pyx_obj_5event_event __pyx_base;
 };
 
-staticforward PyTypeObject __pyx_type_5event_timeout;
 
 struct __pyx_obj_5event_timeout {
   struct __pyx_obj_5event_event __pyx_base;
@@ -131,7 +140,7 @@
 static int __pyx_f_5event___event_sigcb(void) {
   int __pyx_r;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":66 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":66 */
   __pyx_r = (-1);
   goto __pyx_L0;
 
@@ -150,7 +159,7 @@
   PyObject *__pyx_2 = 0;
   PyObject *__pyx_3 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":69 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":69 */
   __pyx_1 = (PyObject *)__pyx_v_arg;
   Py_INCREF(__pyx_1);
   __pyx_2 = PyObject_GetAttr(__pyx_1, __pyx_n___callback); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 69; goto __pyx_L1;}
@@ -180,7 +189,7 @@
   PyObject *__pyx_2 = 0;
   PyObject *__pyx_3 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":72 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":72 */
   __pyx_1 = (PyObject *)__pyx_v_arg;
   Py_INCREF(__pyx_1);
   __pyx_2 = PyObject_GetAttr(__pyx_1, __pyx_n___simple_callback); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 72; goto __pyx_L1;}
@@ -233,43 +242,43 @@
   Py_INCREF(__pyx_v_handle);
   Py_INCREF(__pyx_v_simple);
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":96 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":96 */
   Py_INCREF(__pyx_v_callback);
   Py_DECREF(((struct __pyx_obj_5event_event *)__pyx_v_self)->callback);
   ((struct __pyx_obj_5event_event *)__pyx_v_self)->callback = __pyx_v_callback;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":97 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":97 */
   Py_INCREF(__pyx_v_arg);
   Py_DECREF(((struct __pyx_obj_5event_event *)__pyx_v_self)->args);
   ((struct __pyx_obj_5event_event *)__pyx_v_self)->args = __pyx_v_arg;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":98 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":98 */
   __pyx_1 = PyInt_FromLong(__pyx_v_evtype); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 98; goto __pyx_L1;}
   Py_DECREF(((struct __pyx_obj_5event_event *)__pyx_v_self)->evtype);
   ((struct __pyx_obj_5event_event *)__pyx_v_self)->evtype = __pyx_1;
   __pyx_1 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":99 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":99 */
   Py_INCREF(__pyx_v_handle);
   Py_DECREF(((struct __pyx_obj_5event_event *)__pyx_v_self)->handle);
   ((struct __pyx_obj_5event_event *)__pyx_v_self)->handle = __pyx_v_handle;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":100 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":100 */
   __pyx_2 = PyObject_IsTrue(__pyx_v_simple); if (__pyx_2 < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 100; goto __pyx_L1;}
   if (__pyx_2) {
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":101 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":101 */
     __pyx_v_handler = __pyx_f_5event___simple_event_handler;
     goto __pyx_L2;
   }
   /*else*/ {
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":103 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":103 */
     __pyx_v_handler = __pyx_f_5event___event_handler;
   }
   __pyx_L2:;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":104 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":104 */
   __pyx_2 = (__pyx_v_evtype == 0);
   if (__pyx_2) {
     __pyx_3 = PyObject_IsTrue(__pyx_v_handle); if (__pyx_3 < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 104; goto __pyx_L1;}
@@ -277,13 +286,13 @@
   }
   if (__pyx_2) {
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":105 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":105 */
     evtimer_set((&((struct __pyx_obj_5event_event *)__pyx_v_self)->ev),__pyx_v_handler,((void (*))__pyx_v_self));
     goto __pyx_L3;
   }
   /*else*/ {
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":107 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":107 */
     __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_isinstance); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 107; goto __pyx_L1;}
     __pyx_4 = __Pyx_GetName(__pyx_b, __pyx_n_int); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 107; goto __pyx_L1;}
     __pyx_5 = PyTuple_New(2); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 107; goto __pyx_L1;}
@@ -299,7 +308,7 @@
     __pyx_2 = (!__pyx_3);
     if (__pyx_2) {
 
-      /* "/Users/dugsong/projects/pyevent/event.pyx":108 */
+      /* "/home/goodyear/temp/pyevent-0.3/event.pyx":108 */
       __pyx_1 = PyObject_GetAttr(__pyx_v_handle, __pyx_n_fileno); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 108; goto __pyx_L1;}
       __pyx_5 = PyTuple_New(0); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 108; goto __pyx_L1;}
       __pyx_4 = PyObject_CallObject(__pyx_1, __pyx_5); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 108; goto __pyx_L1;}
@@ -312,7 +321,7 @@
     }
     __pyx_L4:;
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":109 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":109 */
     __pyx_3 = PyInt_AsLong(__pyx_v_handle); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 109; goto __pyx_L1;}
     event_set((&((struct __pyx_obj_5event_event *)__pyx_v_self)->ev),__pyx_3,__pyx_v_evtype,__pyx_v_handler,((void (*))__pyx_v_self));
   }
@@ -340,8 +349,8 @@
 static PyObject *__pyx_f_5event_5event___simple_callback(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
 static PyObject *__pyx_f_5event_5event___simple_callback(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
   short __pyx_v_evtype;
-  extern int event_gotsig;
-  extern int ((*event_sigcb)(void));
+  __PYX_EXTERN_C int event_gotsig;
+  __PYX_EXTERN_C int ((*event_sigcb)(void));
   PyObject *__pyx_r;
   PyObject *__pyx_1 = 0;
   PyObject *__pyx_2 = 0;
@@ -353,10 +362,10 @@
   if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "h", __pyx_argnames, &__pyx_v_evtype)) return 0;
   Py_INCREF(__pyx_v_self);
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":115 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":115 */
   /*try:*/ {
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":116 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":116 */
     __pyx_1 = PySequence_Tuple(((struct __pyx_obj_5event_event *)__pyx_v_self)->args); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 116; goto __pyx_L2;}
     __pyx_2 = PyObject_CallObject(((struct __pyx_obj_5event_event *)__pyx_v_self)->callback, __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 116; goto __pyx_L2;}
     Py_DECREF(__pyx_1); __pyx_1 = 0;
@@ -365,20 +374,20 @@
     Py_DECREF(__pyx_2); __pyx_2 = 0;
     if (__pyx_3) {
 
-      /* "/Users/dugsong/projects/pyevent/event.pyx":117 */
+      /* "/home/goodyear/temp/pyevent-0.3/event.pyx":117 */
       __pyx_3 = ((struct __pyx_obj_5event_event *)__pyx_v_self)->tv.tv_sec;
       if (!__pyx_3) {
         __pyx_3 = ((struct __pyx_obj_5event_event *)__pyx_v_self)->tv.tv_usec;
       }
       if (__pyx_3) {
 
-        /* "/Users/dugsong/projects/pyevent/event.pyx":118 */
+        /* "/home/goodyear/temp/pyevent-0.3/event.pyx":118 */
         event_add((&((struct __pyx_obj_5event_event *)__pyx_v_self)->ev),(&((struct __pyx_obj_5event_event *)__pyx_v_self)->tv));
         goto __pyx_L5;
       }
       /*else*/ {
 
-        /* "/Users/dugsong/projects/pyevent/event.pyx":120 */
+        /* "/home/goodyear/temp/pyevent-0.3/event.pyx":120 */
         event_add((&((struct __pyx_obj_5event_event *)__pyx_v_self)->ev),0);
       }
       __pyx_L5:;
@@ -391,13 +400,13 @@
   Py_XDECREF(__pyx_1); __pyx_1 = 0;
   Py_XDECREF(__pyx_2); __pyx_2 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":121 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":121 */
   /*except:*/ {
     __Pyx_AddTraceback("event.__simple_callback");
     __pyx_1 = __Pyx_GetExcValue(); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 121; goto __pyx_L1;}
     Py_DECREF(__pyx_1); __pyx_1 = 0;
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":122 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":122 */
     __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_sys); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 122; goto __pyx_L1;}
     __pyx_1 = PyObject_GetAttr(__pyx_2, __pyx_n_exc_info); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 122; goto __pyx_L1;}
     Py_DECREF(__pyx_2); __pyx_2 = 0;
@@ -408,16 +417,16 @@
     if (PyObject_SetAttr(__pyx_m, __pyx_n___event_exc, __pyx_4) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 122; goto __pyx_L1;}
     Py_DECREF(__pyx_4); __pyx_4 = 0;
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":123 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":123 */
     event_sigcb = __pyx_f_5event___event_sigcb;
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":124 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":124 */
     event_gotsig = 1;
     goto __pyx_L3;
   }
   __pyx_L3:;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":126 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":126 */
   __pyx_1 = PyInt_FromLong(__pyx_v_evtype); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 126; goto __pyx_L1;}
   __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_EV_SIGNAL); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 126; goto __pyx_L1;}
   __pyx_4 = PyNumber_And(__pyx_1, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 126; goto __pyx_L1;}
@@ -446,13 +455,13 @@
   }
   if (__pyx_3) {
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":128 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":128 */
     Py_DECREF(__pyx_v_self);
     goto __pyx_L6;
   }
   __pyx_L6:;
 
-  __pyx_r = Py_None; Py_INCREF(__pyx_r);
+  __pyx_r = Py_None; Py_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1:;
   Py_XDECREF(__pyx_1);
@@ -468,8 +477,8 @@
 static PyObject *__pyx_f_5event_5event___callback(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
 static PyObject *__pyx_f_5event_5event___callback(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
   short __pyx_v_evtype;
-  extern int event_gotsig;
-  extern int ((*event_sigcb)(void));
+  __PYX_EXTERN_C int event_gotsig;
+  __PYX_EXTERN_C int ((*event_sigcb)(void));
   PyObject *__pyx_r;
   PyObject *__pyx_1 = 0;
   PyObject *__pyx_2 = 0;
@@ -480,10 +489,10 @@
   if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "h", __pyx_argnames, &__pyx_v_evtype)) return 0;
   Py_INCREF(__pyx_v_self);
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":134 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":134 */
   /*try:*/ {
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":135 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":135 */
     __pyx_1 = PyInt_FromLong(__pyx_v_evtype); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 135; goto __pyx_L2;}
     __pyx_2 = PyTuple_New(4); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 135; goto __pyx_L2;}
     Py_INCREF(__pyx_v_self);
@@ -503,13 +512,13 @@
   Py_XDECREF(__pyx_2); __pyx_2 = 0;
   Py_XDECREF(__pyx_1); __pyx_1 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":136 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":136 */
   /*except:*/ {
     __Pyx_AddTraceback("event.__callback");
     __pyx_2 = __Pyx_GetExcValue(); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 136; goto __pyx_L1;}
     Py_DECREF(__pyx_2); __pyx_2 = 0;
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":137 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":137 */
     __pyx_1 = __Pyx_GetName(__pyx_m, __pyx_n_sys); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 137; goto __pyx_L1;}
     __pyx_2 = PyObject_GetAttr(__pyx_1, __pyx_n_exc_info); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 137; goto __pyx_L1;}
     Py_DECREF(__pyx_1); __pyx_1 = 0;
@@ -520,16 +529,16 @@
     if (PyObject_SetAttr(__pyx_m, __pyx_n___event_exc, __pyx_3) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 137; goto __pyx_L1;}
     Py_DECREF(__pyx_3); __pyx_3 = 0;
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":138 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":138 */
     event_sigcb = __pyx_f_5event___event_sigcb;
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":139 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":139 */
     event_gotsig = 1;
     goto __pyx_L3;
   }
   __pyx_L3:;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":140 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":140 */
   __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_EV_READ); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 140; goto __pyx_L1;}
   __pyx_1 = __Pyx_GetName(__pyx_m, __pyx_n_EV_WRITE); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 140; goto __pyx_L1;}
   __pyx_3 = PyNumber_Or(__pyx_2, __pyx_1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 140; goto __pyx_L1;}
@@ -548,13 +557,13 @@
   __pyx_5 = (!event_pending((&((struct __pyx_obj_5event_event *)__pyx_v_self)->ev),__pyx_4,0));
   if (__pyx_5) {
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":141 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":141 */
     Py_DECREF(__pyx_v_self);
     goto __pyx_L4;
   }
   __pyx_L4:;
 
-  __pyx_r = Py_None; Py_INCREF(__pyx_r);
+  __pyx_r = Py_None; Py_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1:;
   Py_XDECREF(__pyx_1);
@@ -582,7 +591,7 @@
   if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "|f", __pyx_argnames, &__pyx_v_timeout)) return 0;
   Py_INCREF(__pyx_v_self);
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":150 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":150 */
   __pyx_1 = __Pyx_GetName(__pyx_m, __pyx_n_EV_READ); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 150; goto __pyx_L1;}
   __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_EV_WRITE); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 150; goto __pyx_L1;}
   __pyx_3 = PyNumber_Or(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 150; goto __pyx_L1;}
@@ -601,41 +610,41 @@
   __pyx_5 = (!event_pending((&((struct __pyx_obj_5event_event *)__pyx_v_self)->ev),__pyx_4,0));
   if (__pyx_5) {
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":152 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":152 */
     Py_INCREF(__pyx_v_self);
     goto __pyx_L2;
   }
   __pyx_L2:;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":153 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":153 */
   ((struct __pyx_obj_5event_event *)__pyx_v_self)->timeout = __pyx_v_timeout;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":154 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":154 */
   __pyx_5 = (__pyx_v_timeout >= 0.0);
   if (__pyx_5) {
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":155 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":155 */
     ((struct __pyx_obj_5event_event *)__pyx_v_self)->tv.tv_sec = ((long )__pyx_v_timeout);
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":156 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":156 */
     ((struct __pyx_obj_5event_event *)__pyx_v_self)->tv.tv_usec = ((__pyx_v_timeout - ((float )((struct __pyx_obj_5event_event *)__pyx_v_self)->tv.tv_sec)) * 1000000.0);
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":157 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":157 */
     event_add((&((struct __pyx_obj_5event_event *)__pyx_v_self)->ev),(&((struct __pyx_obj_5event_event *)__pyx_v_self)->tv));
     goto __pyx_L3;
   }
   /*else*/ {
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":159 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":159 */
     ((struct __pyx_obj_5event_event *)__pyx_v_self)->tv.tv_sec = 0;
     ((struct __pyx_obj_5event_event *)__pyx_v_self)->tv.tv_usec = 0;
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":160 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":160 */
     event_add((&((struct __pyx_obj_5event_event *)__pyx_v_self)->ev),0);
   }
   __pyx_L3:;
 
-  __pyx_r = Py_None; Py_INCREF(__pyx_r);
+  __pyx_r = Py_None; Py_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1:;
   Py_XDECREF(__pyx_1);
@@ -660,7 +669,7 @@
   if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "", __pyx_argnames)) return 0;
   Py_INCREF(__pyx_v_self);
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":164 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":164 */
   __pyx_1 = __Pyx_GetName(__pyx_m, __pyx_n_EV_TIMEOUT); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 164; goto __pyx_L1;}
   __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_EV_SIGNAL); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 164; goto __pyx_L1;}
   __pyx_3 = PyNumber_Or(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 164; goto __pyx_L1;}
@@ -681,7 +690,7 @@
   __pyx_2 = 0;
   goto __pyx_L0;
 
-  __pyx_r = Py_None; Py_INCREF(__pyx_r);
+  __pyx_r = Py_None; Py_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1:;
   Py_XDECREF(__pyx_1);
@@ -708,7 +717,7 @@
   if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "", __pyx_argnames)) return 0;
   Py_INCREF(__pyx_v_self);
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":168 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":168 */
   __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n_pending); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 168; goto __pyx_L1;}
   __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 168; goto __pyx_L1;}
   __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 168; goto __pyx_L1;}
@@ -718,16 +727,16 @@
   Py_DECREF(__pyx_3); __pyx_3 = 0;
   if (__pyx_4) {
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":169 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":169 */
     event_del((&((struct __pyx_obj_5event_event *)__pyx_v_self)->ev));
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":170 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":170 */
     Py_DECREF(__pyx_v_self);
     goto __pyx_L2;
   }
   __pyx_L2:;
 
-  __pyx_r = Py_None; Py_INCREF(__pyx_r);
+  __pyx_r = Py_None; Py_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1:;
   Py_XDECREF(__pyx_1);
@@ -749,7 +758,7 @@
   PyObject *__pyx_3 = 0;
   Py_INCREF(__pyx_v_self);
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":173 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":173 */
   __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n_delete); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 173; goto __pyx_L1;}
   __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 173; goto __pyx_L1;}
   __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 173; goto __pyx_L1;}
@@ -778,7 +787,7 @@
   PyObject *__pyx_2 = 0;
   Py_INCREF(__pyx_v_self);
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":176 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":176 */
   __pyx_1 = PyInt_FromLong(((struct __pyx_obj_5event_event *)__pyx_v_self)->ev.ev_flags); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 177; goto __pyx_L1;}
   __pyx_2 = PyTuple_New(4); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 177; goto __pyx_L1;}
   PyTuple_SET_ITEM(__pyx_2, 0, __pyx_1);
@@ -795,7 +804,7 @@
   __pyx_1 = 0;
   goto __pyx_L0;
 
-  __pyx_r = Py_None; Py_INCREF(__pyx_r);
+  __pyx_r = Py_None; Py_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1:;
   Py_XDECREF(__pyx_1);
@@ -834,11 +843,11 @@
   Py_INCREF(__pyx_v_handle);
   Py_INCREF(__pyx_v_callback);
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":193 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":193 */
   __pyx_1 = PyObject_GetAttr(((PyObject*)__pyx_ptype_5event_event), __pyx_n___init__); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 193; goto __pyx_L1;}
   __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_EV_READ); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 193; goto __pyx_L1;}
   __pyx_3 = PyTuple_New(5); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 193; goto __pyx_L1;}
-  Py_INCREF((PyObject *)__pyx_v_self);
+  Py_INCREF(__pyx_v_self);
   PyTuple_SET_ITEM(__pyx_3, 0, __pyx_v_self);
   Py_INCREF(__pyx_v_callback);
   PyTuple_SET_ITEM(__pyx_3, 1, __pyx_v_callback);
@@ -858,12 +867,12 @@
   Py_DECREF(__pyx_2); __pyx_2 = 0;
   Py_DECREF(__pyx_4); __pyx_4 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":194 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":194 */
   Py_INCREF(__pyx_v_args);
   Py_DECREF(((struct __pyx_obj_5event_read *)__pyx_v_self)->__pyx_base.args);
   ((struct __pyx_obj_5event_read *)__pyx_v_self)->__pyx_base.args = __pyx_v_args;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":195 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":195 */
   __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n_add); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 195; goto __pyx_L1;}
   __pyx_3 = PyTuple_New(0); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 195; goto __pyx_L1;}
   __pyx_2 = PyObject_CallObject(__pyx_1, __pyx_3); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 195; goto __pyx_L1;}
@@ -913,11 +922,11 @@
   Py_INCREF(__pyx_v_handle);
   Py_INCREF(__pyx_v_callback);
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":211 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":211 */
   __pyx_1 = PyObject_GetAttr(((PyObject*)__pyx_ptype_5event_event), __pyx_n___init__); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 211; goto __pyx_L1;}
   __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_EV_WRITE); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 211; goto __pyx_L1;}
   __pyx_3 = PyTuple_New(5); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 211; goto __pyx_L1;}
-  Py_INCREF((PyObject *)__pyx_v_self);
+  Py_INCREF(__pyx_v_self);
   PyTuple_SET_ITEM(__pyx_3, 0, __pyx_v_self);
   Py_INCREF(__pyx_v_callback);
   PyTuple_SET_ITEM(__pyx_3, 1, __pyx_v_callback);
@@ -937,12 +946,12 @@
   Py_DECREF(__pyx_2); __pyx_2 = 0;
   Py_DECREF(__pyx_4); __pyx_4 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":212 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":212 */
   Py_INCREF(__pyx_v_args);
   Py_DECREF(((struct __pyx_obj_5event_write *)__pyx_v_self)->__pyx_base.args);
   ((struct __pyx_obj_5event_write *)__pyx_v_self)->__pyx_base.args = __pyx_v_args;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":213 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":213 */
   __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n_add); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 213; goto __pyx_L1;}
   __pyx_3 = PyTuple_New(0); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 213; goto __pyx_L1;}
   __pyx_2 = PyObject_CallObject(__pyx_1, __pyx_3); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 213; goto __pyx_L1;}
@@ -992,7 +1001,7 @@
   Py_INCREF(__pyx_v_sig);
   Py_INCREF(__pyx_v_callback);
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":230 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":230 */
   __pyx_1 = PyObject_GetAttr(((PyObject*)__pyx_ptype_5event_event), __pyx_n___init__); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 230; goto __pyx_L1;}
   __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_EV_SIGNAL); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 230; goto __pyx_L1;}
   __pyx_3 = __Pyx_GetName(__pyx_m, __pyx_n_EV_PERSIST); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 230; goto __pyx_L1;}
@@ -1000,7 +1009,7 @@
   Py_DECREF(__pyx_2); __pyx_2 = 0;
   Py_DECREF(__pyx_3); __pyx_3 = 0;
   __pyx_2 = PyTuple_New(5); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 230; goto __pyx_L1;}
-  Py_INCREF((PyObject *)__pyx_v_self);
+  Py_INCREF(__pyx_v_self);
   PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_self);
   Py_INCREF(__pyx_v_callback);
   PyTuple_SET_ITEM(__pyx_2, 1, __pyx_v_callback);
@@ -1020,12 +1029,12 @@
   Py_DECREF(__pyx_3); __pyx_3 = 0;
   Py_DECREF(__pyx_4); __pyx_4 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":232 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":232 */
   Py_INCREF(__pyx_v_args);
   Py_DECREF(((struct __pyx_obj_5event_signal *)__pyx_v_self)->__pyx_base.args);
   ((struct __pyx_obj_5event_signal *)__pyx_v_self)->__pyx_base.args = __pyx_v_args;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":233 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":233 */
   __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n_add); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 233; goto __pyx_L1;}
   __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 233; goto __pyx_L1;}
   __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 233; goto __pyx_L1;}
@@ -1075,10 +1084,10 @@
   Py_INCREF(__pyx_v_secs);
   Py_INCREF(__pyx_v_callback);
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":249 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":249 */
   __pyx_1 = PyObject_GetAttr(((PyObject*)__pyx_ptype_5event_event), __pyx_n___init__); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 249; goto __pyx_L1;}
   __pyx_2 = PyTuple_New(3); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 249; goto __pyx_L1;}
-  Py_INCREF((PyObject *)__pyx_v_self);
+  Py_INCREF(__pyx_v_self);
   PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_self);
   Py_INCREF(__pyx_v_callback);
   PyTuple_SET_ITEM(__pyx_2, 1, __pyx_v_callback);
@@ -1094,12 +1103,12 @@
   Py_DECREF(__pyx_3); __pyx_3 = 0;
   Py_DECREF(__pyx_4); __pyx_4 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":250 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":250 */
   Py_INCREF(__pyx_v_args);
   Py_DECREF(((struct __pyx_obj_5event_timeout *)__pyx_v_self)->__pyx_base.args);
   ((struct __pyx_obj_5event_timeout *)__pyx_v_self)->__pyx_base.args = __pyx_v_args;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":251 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":251 */
   __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n_add); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 251; goto __pyx_L1;}
   __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 251; goto __pyx_L1;}
   Py_INCREF(__pyx_v_secs);
@@ -1135,10 +1144,10 @@
   static char *__pyx_argnames[] = {0};
   if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "", __pyx_argnames)) return 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":255 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":255 */
   event_init();
 
-  __pyx_r = Py_None; Py_INCREF(__pyx_r);
+  __pyx_r = Py_None; Py_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1:;
   __Pyx_AddTraceback("event.init");
@@ -1147,9 +1156,31 @@
   return __pyx_r;
 }
 
+static PyObject *__pyx_n_traceback;
+static PyObject *__pyx_n_print_stack;
+
+static PyObject *__pyx_k20p;
+static PyObject *__pyx_k21p;
+static PyObject *__pyx_k22p;
+static PyObject *__pyx_k23p;
+static PyObject *__pyx_k24p;
+static PyObject *__pyx_k26p;
+static PyObject *__pyx_k27p;
+static PyObject *__pyx_k28p;
+
+static char (__pyx_k20[]) = "===pyevent.dispatch===";
+static char (__pyx_k21[]) = "Exception Encountered in pyevent.dispatch";
+static char (__pyx_k22[]) = "Details:";
+static char (__pyx_k23[]) = "======================";
+static char (__pyx_k24[]) = "======================";
+static char (__pyx_k26[]) = "======================";
+static char (__pyx_k27[]) = "=end pyevent.dispatch=";
+static char (__pyx_k28[]) = "======================";
+
 static PyObject *__pyx_f_5event_dispatch(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
 static char __pyx_doc_5event_dispatch[] = "Dispatch all events on the event queue.";
 static PyObject *__pyx_f_5event_dispatch(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
+  PyObject *__pyx_v_traceback;
   PyObject *__pyx_r;
   PyObject *__pyx_1 = 0;
   int __pyx_2;
@@ -1159,42 +1190,95 @@
   PyObject *__pyx_6 = 0;
   static char *__pyx_argnames[] = {0};
   if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "", __pyx_argnames)) return 0;
+  __pyx_v_traceback = Py_None; Py_INCREF(Py_None);
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":260 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":260 */
   event_dispatch();
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":261 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":261 */
   __pyx_1 = __Pyx_GetName(__pyx_m, __pyx_n___event_exc); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 261; goto __pyx_L1;}
   __pyx_2 = PyObject_IsTrue(__pyx_1); if (__pyx_2 < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 261; goto __pyx_L1;}
   Py_DECREF(__pyx_1); __pyx_1 = 0;
   if (__pyx_2) {
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":262 */
-    __pyx_1 = __Pyx_GetName(__pyx_m, __pyx_n___event_exc); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 262; goto __pyx_L1;}
-    __pyx_3 = PyInt_FromLong(0); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 262; goto __pyx_L1;}
-    __pyx_4 = PyObject_GetItem(__pyx_1, __pyx_3); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 262; goto __pyx_L1;}
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":262 */
+    if (__Pyx_PrintItem(__pyx_k20p) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 262; goto __pyx_L1;}
+    if (__Pyx_PrintNewline() < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 262; goto __pyx_L1;}
+
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":263 */
+    if (__Pyx_PrintItem(__pyx_k21p) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 263; goto __pyx_L1;}
+    if (__Pyx_PrintNewline() < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 263; goto __pyx_L1;}
+
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":264 */
+    if (__Pyx_PrintItem(__pyx_k22p) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 264; goto __pyx_L1;}
+    if (__Pyx_PrintNewline() < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 264; goto __pyx_L1;}
+
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":265 */
+    __pyx_1 = __Pyx_GetName(__pyx_m, __pyx_n___event_exc); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 265; goto __pyx_L1;}
+    if (__Pyx_PrintItem(__pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 265; goto __pyx_L1;}
+    Py_DECREF(__pyx_1); __pyx_1 = 0;
+    if (__Pyx_PrintNewline() < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 265; goto __pyx_L1;}
+
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":266 */
+    if (__Pyx_PrintItem(__pyx_k23p) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 266; goto __pyx_L1;}
+    if (__Pyx_PrintNewline() < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 266; goto __pyx_L1;}
+
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":267 */
+    if (__Pyx_PrintItem(__pyx_k24p) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 267; goto __pyx_L1;}
+    if (__Pyx_PrintNewline() < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 267; goto __pyx_L1;}
+
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":268 */
+    __pyx_1 = __Pyx_Import(__pyx_n_traceback, 0); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 268; goto __pyx_L1;}
+    Py_DECREF(__pyx_v_traceback);
+    __pyx_v_traceback = __pyx_1;
+    __pyx_1 = 0;
+
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":269 */
+    __pyx_1 = PyObject_GetAttr(__pyx_v_traceback, __pyx_n_print_stack); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 269; goto __pyx_L1;}
+    __pyx_3 = PyTuple_New(0); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 269; goto __pyx_L1;}
+    __pyx_4 = PyObject_CallObject(__pyx_1, __pyx_3); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 269; goto __pyx_L1;}
     Py_DECREF(__pyx_1); __pyx_1 = 0;
     Py_DECREF(__pyx_3); __pyx_3 = 0;
-    __pyx_1 = __Pyx_GetName(__pyx_m, __pyx_n___event_exc); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 262; goto __pyx_L1;}
-    __pyx_3 = PyInt_FromLong(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 262; goto __pyx_L1;}
-    __pyx_5 = PyObject_GetItem(__pyx_1, __pyx_3); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 262; goto __pyx_L1;}
+    Py_DECREF(__pyx_4); __pyx_4 = 0;
+
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":270 */
+    if (__Pyx_PrintItem(__pyx_k26p) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 270; goto __pyx_L1;}
+    if (__Pyx_PrintNewline() < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 270; goto __pyx_L1;}
+
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":271 */
+    if (__Pyx_PrintItem(__pyx_k27p) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 271; goto __pyx_L1;}
+    if (__Pyx_PrintNewline() < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 271; goto __pyx_L1;}
+
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":272 */
+    if (__Pyx_PrintItem(__pyx_k28p) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 272; goto __pyx_L1;}
+    if (__Pyx_PrintNewline() < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 272; goto __pyx_L1;}
+
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":273 */
+    __pyx_1 = __Pyx_GetName(__pyx_m, __pyx_n___event_exc); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 273; goto __pyx_L1;}
+    __pyx_3 = PyInt_FromLong(0); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 273; goto __pyx_L1;}
+    __pyx_4 = PyObject_GetItem(__pyx_1, __pyx_3); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 273; goto __pyx_L1;}
     Py_DECREF(__pyx_1); __pyx_1 = 0;
     Py_DECREF(__pyx_3); __pyx_3 = 0;
-    __pyx_1 = __Pyx_GetName(__pyx_m, __pyx_n___event_exc); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 262; goto __pyx_L1;}
-    __pyx_3 = PyInt_FromLong(2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 262; goto __pyx_L1;}
-    __pyx_6 = PyObject_GetItem(__pyx_1, __pyx_3); if (!__pyx_6) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 262; goto __pyx_L1;}
+    __pyx_1 = __Pyx_GetName(__pyx_m, __pyx_n___event_exc); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 273; goto __pyx_L1;}
+    __pyx_3 = PyInt_FromLong(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 273; goto __pyx_L1;}
+    __pyx_5 = PyObject_GetItem(__pyx_1, __pyx_3); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 273; goto __pyx_L1;}
+    Py_DECREF(__pyx_1); __pyx_1 = 0;
+    Py_DECREF(__pyx_3); __pyx_3 = 0;
+    __pyx_1 = __Pyx_GetName(__pyx_m, __pyx_n___event_exc); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 273; goto __pyx_L1;}
+    __pyx_3 = PyInt_FromLong(2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 273; goto __pyx_L1;}
+    __pyx_6 = PyObject_GetItem(__pyx_1, __pyx_3); if (!__pyx_6) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 273; goto __pyx_L1;}
     Py_DECREF(__pyx_1); __pyx_1 = 0;
     Py_DECREF(__pyx_3); __pyx_3 = 0;
     __Pyx_Raise(__pyx_4, __pyx_5, __pyx_6);
     Py_DECREF(__pyx_4); __pyx_4 = 0;
     Py_DECREF(__pyx_5); __pyx_5 = 0;
     Py_DECREF(__pyx_6); __pyx_6 = 0;
-    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 262; goto __pyx_L1;}
+    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 273; goto __pyx_L1;}
     goto __pyx_L2;
   }
   __pyx_L2:;
 
-  __pyx_r = Py_None; Py_INCREF(__pyx_r);
+  __pyx_r = Py_None; Py_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1:;
   Py_XDECREF(__pyx_1);
@@ -1205,6 +1289,7 @@
   __Pyx_AddTraceback("event.dispatch");
   __pyx_r = 0;
   __pyx_L0:;
+  Py_DECREF(__pyx_v_traceback);
   return __pyx_r;
 }
 
@@ -1220,23 +1305,23 @@
   if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "|O", __pyx_argnames, &__pyx_v_nonblock)) return 0;
   Py_INCREF(__pyx_v_nonblock);
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":267 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":278 */
   __pyx_v_flags = EVLOOP_ONCE;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":268 */
-  __pyx_1 = PyObject_IsTrue(__pyx_v_nonblock); if (__pyx_1 < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 268; goto __pyx_L1;}
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":279 */
+  __pyx_1 = PyObject_IsTrue(__pyx_v_nonblock); if (__pyx_1 < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 279; goto __pyx_L1;}
   if (__pyx_1) {
 
-    /* "/Users/dugsong/projects/pyevent/event.pyx":269 */
+    /* "/home/goodyear/temp/pyevent-0.3/event.pyx":280 */
     __pyx_v_flags = (EVLOOP_ONCE | EVLOOP_NONBLOCK);
     goto __pyx_L2;
   }
   __pyx_L2:;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":270 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":281 */
   event_loop(__pyx_v_flags);
 
-  __pyx_r = Py_None; Py_INCREF(__pyx_r);
+  __pyx_r = Py_None; Py_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1:;
   __Pyx_AddTraceback("event.loop");
@@ -1249,19 +1334,19 @@
 static PyObject *__pyx_f_5event_abort(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
 static char __pyx_doc_5event_abort[] = "Abort event dispatch loop.";
 static PyObject *__pyx_f_5event_abort(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
-  extern int event_gotsig;
-  extern int ((*event_sigcb)(void));
+  __PYX_EXTERN_C int event_gotsig;
+  __PYX_EXTERN_C int ((*event_sigcb)(void));
   PyObject *__pyx_r;
   static char *__pyx_argnames[] = {0};
   if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "", __pyx_argnames)) return 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":276 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":287 */
   event_sigcb = __pyx_f_5event___event_sigcb;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":277 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":288 */
   event_gotsig = 1;
 
-  __pyx_r = Py_None; Py_INCREF(__pyx_r);
+  __pyx_r = Py_None; Py_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1:;
   __Pyx_AddTraceback("event.abort");
@@ -1298,8 +1383,10 @@
   {&__pyx_n_isinstance, "isinstance"},
   {&__pyx_n_loop, "loop"},
   {&__pyx_n_pending, "pending"},
+  {&__pyx_n_print_stack, "print_stack"},
   {&__pyx_n_simple, "simple"},
   {&__pyx_n_sys, "sys"},
+  {&__pyx_n_traceback, "traceback"},
   {0, 0}
 };
 
@@ -1311,16 +1398,24 @@
   {&__pyx_k6p, __pyx_k6, sizeof(__pyx_k6)},
   {&__pyx_k7p, __pyx_k7, sizeof(__pyx_k7)},
   {&__pyx_k15p, __pyx_k15, sizeof(__pyx_k15)},
+  {&__pyx_k20p, __pyx_k20, sizeof(__pyx_k20)},
+  {&__pyx_k21p, __pyx_k21, sizeof(__pyx_k21)},
+  {&__pyx_k22p, __pyx_k22, sizeof(__pyx_k22)},
+  {&__pyx_k23p, __pyx_k23, sizeof(__pyx_k23)},
+  {&__pyx_k24p, __pyx_k24, sizeof(__pyx_k24)},
+  {&__pyx_k26p, __pyx_k26, sizeof(__pyx_k26)},
+  {&__pyx_k27p, __pyx_k27, sizeof(__pyx_k27)},
+  {&__pyx_k28p, __pyx_k28, sizeof(__pyx_k28)},
   {0, 0, 0}
 };
 
 static PyObject *__pyx_tp_new_5event_event(PyTypeObject *t, PyObject *a, PyObject *k) {
   PyObject *o = (*t->tp_alloc)(t, 0);
   struct __pyx_obj_5event_event *p = (struct __pyx_obj_5event_event *)o;
-  p->handle = Py_None; Py_INCREF(p->handle);
-  p->evtype = Py_None; Py_INCREF(p->evtype);
-  p->callback = Py_None; Py_INCREF(p->callback);
-  p->args = Py_None; Py_INCREF(p->args);
+  p->handle = Py_None; Py_INCREF(Py_None);
+  p->evtype = Py_None; Py_INCREF(Py_None);
+  p->callback = Py_None; Py_INCREF(Py_None);
+  p->args = Py_None; Py_INCREF(Py_None);
   return o;
 }
 
@@ -1363,13 +1458,13 @@
 static int __pyx_tp_clear_5event_event(PyObject *o) {
   struct __pyx_obj_5event_event *p = (struct __pyx_obj_5event_event *)o;
   Py_XDECREF(p->handle);
-  p->handle = Py_None; Py_INCREF(p->handle);
+  p->handle = Py_None; Py_INCREF(Py_None);
   Py_XDECREF(p->evtype);
-  p->evtype = Py_None; Py_INCREF(p->evtype);
+  p->evtype = Py_None; Py_INCREF(Py_None);
   Py_XDECREF(p->callback);
-  p->callback = Py_None; Py_INCREF(p->callback);
+  p->callback = Py_None; Py_INCREF(Py_None);
   Py_XDECREF(p->args);
-  p->args = Py_None; Py_INCREF(p->args);
+  p->args = Py_None; Py_INCREF(Py_None);
   return 0;
 }
 
@@ -1449,7 +1544,7 @@
   0, /*bf_getcharbuffer*/
 };
 
-statichere PyTypeObject __pyx_type_5event_event = {
+PyTypeObject __pyx_type_5event_event = {
   PyObject_HEAD_INIT(0)
   0, /*ob_size*/
   "event.event", /*tp_name*/
@@ -1512,7 +1607,7 @@
 static int __pyx_tp_traverse_5event_read(PyObject *o, visitproc v, void *a) {
   int e;
   struct __pyx_obj_5event_read *p = (struct __pyx_obj_5event_read *)o;
-  __pyx_ptype_5event_event->tp_traverse(o, v, a);
+  e = __pyx_ptype_5event_event->tp_traverse(o, v, a); if (e) return e;
   return 0;
 }
 
@@ -1593,7 +1688,7 @@
   0, /*bf_getcharbuffer*/
 };
 
-statichere PyTypeObject __pyx_type_5event_read = {
+PyTypeObject __pyx_type_5event_read = {
   PyObject_HEAD_INIT(0)
   0, /*ob_size*/
   "event.read", /*tp_name*/
@@ -1614,7 +1709,7 @@
   0, /*tp_getattro*/
   0, /*tp_setattro*/
   &__pyx_tp_as_buffer_read, /*tp_as_buffer*/
-  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_BASETYPE, /*tp_flags*/
+  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
   "read(handle, callback, *args) -> event object\n    \n    Simplified event interface:\n    Create a new read event, and add it to the event queue.\n    \n    Arguments:\n\n    handle   -- file handle, descriptor, or socket\n    callback -- user callback with (*args) prototype, which can return\n                a non-None value to be rescheduled\n    *args    -- optional callback arguments\n    ", /*tp_doc*/
   __pyx_tp_traverse_5event_read, /*tp_traverse*/
   __pyx_tp_clear_5event_read, /*tp_clear*/
@@ -1656,7 +1751,7 @@
 static int __pyx_tp_traverse_5event_write(PyObject *o, visitproc v, void *a) {
   int e;
   struct __pyx_obj_5event_write *p = (struct __pyx_obj_5event_write *)o;
-  __pyx_ptype_5event_event->tp_traverse(o, v, a);
+  e = __pyx_ptype_5event_event->tp_traverse(o, v, a); if (e) return e;
   return 0;
 }
 
@@ -1737,7 +1832,7 @@
   0, /*bf_getcharbuffer*/
 };
 
-statichere PyTypeObject __pyx_type_5event_write = {
+PyTypeObject __pyx_type_5event_write = {
   PyObject_HEAD_INIT(0)
   0, /*ob_size*/
   "event.write", /*tp_name*/
@@ -1758,7 +1853,7 @@
   0, /*tp_getattro*/
   0, /*tp_setattro*/
   &__pyx_tp_as_buffer_write, /*tp_as_buffer*/
-  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_BASETYPE, /*tp_flags*/
+  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
   "write(handle, callback, *args) -> event object\n\n    Simplified event interface:\n    Create a new write event, and add it to the event queue.\n    \n    Arguments:\n\n    handle   -- file handle, descriptor, or socket\n    callback -- user callback with (*args) prototype, which can return\n                a non-None value to be rescheduled\n    *args    -- optional callback arguments\n    ", /*tp_doc*/
   __pyx_tp_traverse_5event_write, /*tp_traverse*/
   __pyx_tp_clear_5event_write, /*tp_clear*/
@@ -1800,7 +1895,7 @@
 static int __pyx_tp_traverse_5event_signal(PyObject *o, visitproc v, void *a) {
   int e;
   struct __pyx_obj_5event_signal *p = (struct __pyx_obj_5event_signal *)o;
-  __pyx_ptype_5event_event->tp_traverse(o, v, a);
+  e = __pyx_ptype_5event_event->tp_traverse(o, v, a); if (e) return e;
   return 0;
 }
 
@@ -1881,7 +1976,7 @@
   0, /*bf_getcharbuffer*/
 };
 
-statichere PyTypeObject __pyx_type_5event_signal = {
+PyTypeObject __pyx_type_5event_signal = {
   PyObject_HEAD_INIT(0)
   0, /*ob_size*/
   "event.signal", /*tp_name*/
@@ -1902,7 +1997,7 @@
   0, /*tp_getattro*/
   0, /*tp_setattro*/
   &__pyx_tp_as_buffer_signal, /*tp_as_buffer*/
-  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_BASETYPE, /*tp_flags*/
+  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
   "signal(sig, callback, *args) -> event object\n\n    Simplified event interface:\n    Create a new signal event, and add it to the event queue.\n    XXX - persistent event is added with EV_PERSIST, like signal_set()\n    \n    Arguments:\n\n    sig      -- signal number\n    callback -- user callback with (*args) prototype, which can return\n                a non-None value to be rescheduled\n    *args    -- optional callback arguments\n    ", /*tp_doc*/
   __pyx_tp_traverse_5event_signal, /*tp_traverse*/
   __pyx_tp_clear_5event_signal, /*tp_clear*/
@@ -1944,7 +2039,7 @@
 static int __pyx_tp_traverse_5event_timeout(PyObject *o, visitproc v, void *a) {
   int e;
   struct __pyx_obj_5event_timeout *p = (struct __pyx_obj_5event_timeout *)o;
-  __pyx_ptype_5event_event->tp_traverse(o, v, a);
+  e = __pyx_ptype_5event_event->tp_traverse(o, v, a); if (e) return e;
   return 0;
 }
 
@@ -2025,7 +2120,7 @@
   0, /*bf_getcharbuffer*/
 };
 
-statichere PyTypeObject __pyx_type_5event_timeout = {
+PyTypeObject __pyx_type_5event_timeout = {
   PyObject_HEAD_INIT(0)
   0, /*ob_size*/
   "event.timeout", /*tp_name*/
@@ -2046,7 +2141,7 @@
   0, /*tp_getattro*/
   0, /*tp_setattro*/
   &__pyx_tp_as_buffer_timeout, /*tp_as_buffer*/
-  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_BASETYPE, /*tp_flags*/
+  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
   "timeout(secs, callback, *args) -> event object\n\n    Simplified event interface:\n    Create a new timer event, and add it to the event queue.\n\n    Arguments:\n\n    secs     -- event timeout in seconds\n    callback -- user callback with (*args) prototype, which can return\n                a non-None value to be rescheduled\n    *args    -- optional callback arguments\n    ", /*tp_doc*/
   __pyx_tp_traverse_5event_timeout, /*tp_traverse*/
   __pyx_tp_clear_5event_timeout, /*tp_clear*/
@@ -2082,14 +2177,17 @@
   {0, 0, 0, 0}
 };
 
-DL_EXPORT(void) initevent(void); /*proto*/
-DL_EXPORT(void) initevent(void) {
+static void __pyx_init_filenames(void); /*proto*/
+
+PyMODINIT_FUNC initevent(void); /*proto*/
+PyMODINIT_FUNC initevent(void) {
   PyObject *__pyx_1 = 0;
   PyObject *__pyx_2 = 0;
   PyObject *__pyx_3 = 0;
   PyObject *__pyx_4 = 0;
   PyObject *__pyx_5 = 0;
   PyObject *__pyx_6 = 0;
+  __pyx_init_filenames();
   __pyx_m = Py_InitModule4("event", __pyx_methods, __pyx_mdoc, 0, PYTHON_API_VERSION);
   if (!__pyx_m) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 11; goto __pyx_L1;};
   __pyx_b = PyImport_AddModule("__builtin__");
@@ -2118,7 +2216,7 @@
   if (PyObject_SetAttrString(__pyx_m, "timeout", (PyObject *)&__pyx_type_5event_timeout) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 235; goto __pyx_L1;}
   __pyx_ptype_5event_timeout = &__pyx_type_5event_timeout;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":18 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":18 */
   __pyx_1 = PyTuple_New(2); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 18; goto __pyx_L1;}
   Py_INCREF(__pyx_k1p);
   PyTuple_SET_ITEM(__pyx_1, 0, __pyx_k1p);
@@ -2127,7 +2225,7 @@
   if (PyObject_SetAttr(__pyx_m, __pyx_n___author__, __pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 18; goto __pyx_L1;}
   Py_DECREF(__pyx_1); __pyx_1 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":20 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":20 */
   __pyx_1 = PyTuple_New(2); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 20; goto __pyx_L1;}
   Py_INCREF(__pyx_k3p);
   PyTuple_SET_ITEM(__pyx_1, 0, __pyx_k3p);
@@ -2136,49 +2234,49 @@
   if (PyObject_SetAttr(__pyx_m, __pyx_n___copyright__, __pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 20; goto __pyx_L1;}
   Py_DECREF(__pyx_1); __pyx_1 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":22 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":22 */
   if (PyObject_SetAttr(__pyx_m, __pyx_n___license__, __pyx_n_BSD) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 22; goto __pyx_L1;}
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":23 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":23 */
   if (PyObject_SetAttr(__pyx_m, __pyx_n___url__, __pyx_k6p) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 23; goto __pyx_L1;}
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":24 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":24 */
   if (PyObject_SetAttr(__pyx_m, __pyx_n___version__, __pyx_k7p) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 24; goto __pyx_L1;}
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":26 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":26 */
   __pyx_1 = __Pyx_Import(__pyx_n_sys, 0); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 26; goto __pyx_L1;}
   if (PyObject_SetAttr(__pyx_m, __pyx_n_sys, __pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 26; goto __pyx_L1;}
   Py_DECREF(__pyx_1); __pyx_1 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":57 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":57 */
   __pyx_1 = PyInt_FromLong(1); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 57; goto __pyx_L1;}
   if (PyObject_SetAttr(__pyx_m, __pyx_n_EV_TIMEOUT, __pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 57; goto __pyx_L1;}
   Py_DECREF(__pyx_1); __pyx_1 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":58 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":58 */
   __pyx_1 = PyInt_FromLong(2); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 58; goto __pyx_L1;}
   if (PyObject_SetAttr(__pyx_m, __pyx_n_EV_READ, __pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 58; goto __pyx_L1;}
   Py_DECREF(__pyx_1); __pyx_1 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":59 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":59 */
   __pyx_1 = PyInt_FromLong(4); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 59; goto __pyx_L1;}
   if (PyObject_SetAttr(__pyx_m, __pyx_n_EV_WRITE, __pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 59; goto __pyx_L1;}
   Py_DECREF(__pyx_1); __pyx_1 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":60 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":60 */
   __pyx_1 = PyInt_FromLong(8); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 60; goto __pyx_L1;}
   if (PyObject_SetAttr(__pyx_m, __pyx_n_EV_SIGNAL, __pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 60; goto __pyx_L1;}
   Py_DECREF(__pyx_1); __pyx_1 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":61 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":61 */
   __pyx_1 = PyInt_FromLong(16); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 61; goto __pyx_L1;}
   if (PyObject_SetAttr(__pyx_m, __pyx_n_EV_PERSIST, __pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 61; goto __pyx_L1;}
   Py_DECREF(__pyx_1); __pyx_1 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":63 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":63 */
   if (PyObject_SetAttr(__pyx_m, __pyx_n___event_exc, Py_None) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 63; goto __pyx_L1;}
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":92 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":92 */
   Py_INCREF(Py_None);
   __pyx_k9 = Py_None;
   __pyx_k10 = 0;
@@ -2189,18 +2287,18 @@
   __pyx_k12 = __pyx_2;
   __pyx_2 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":143 */
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":143 */
   __pyx_k13 = (-1);
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":264 */
-  __pyx_3 = __Pyx_GetName(__pyx_b, __pyx_n_False); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 264; goto __pyx_L1;}
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":275 */
+  __pyx_3 = __Pyx_GetName(__pyx_b, __pyx_n_False); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 275; goto __pyx_L1;}
   __pyx_k14 = __pyx_3;
   __pyx_3 = 0;
 
-  /* "/Users/dugsong/projects/pyevent/event.pyx":280 */
-  __pyx_4 = __Pyx_GetName(__pyx_m, __pyx_n_init); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 280; goto __pyx_L1;}
-  __pyx_5 = PyTuple_New(0); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 280; goto __pyx_L1;}
-  __pyx_6 = PyObject_CallObject(__pyx_4, __pyx_5); if (!__pyx_6) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 280; goto __pyx_L1;}
+  /* "/home/goodyear/temp/pyevent-0.3/event.pyx":291 */
+  __pyx_4 = __Pyx_GetName(__pyx_m, __pyx_n_init); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 291; goto __pyx_L1;}
+  __pyx_5 = PyTuple_New(0); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 291; goto __pyx_L1;}
+  __pyx_6 = PyObject_CallObject(__pyx_4, __pyx_5); if (!__pyx_6) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 291; goto __pyx_L1;}
   Py_DECREF(__pyx_4); __pyx_4 = 0;
   Py_DECREF(__pyx_5); __pyx_5 = 0;
   Py_DECREF(__pyx_6); __pyx_6 = 0;
@@ -2218,15 +2316,18 @@
 static char *__pyx_filenames[] = {
   "event.pyx",
 };
-statichere char **__pyx_f = __pyx_filenames;
 
 /* Runtime support code */
 
+static void __pyx_init_filenames(void) {
+  __pyx_f = __pyx_filenames;
+}
+
 static int __Pyx_GetStarArgs(
     PyObject **args, 
     PyObject **kwds,
     char *kwd_list[], 
-    int nargs,
+    Py_ssize_t nargs,
     PyObject **args2, 
     PyObject **kwds2)
 {
@@ -2286,10 +2387,8 @@
 bad:
     Py_XDECREF(args1);
     Py_XDECREF(kwds1);
-    if (*args2)
-        Py_XDECREF(*args2);
-    if (*kwds2)
-        Py_XDECREF(*kwds2);
+    Py_XDECREF(*args2);
+    Py_XDECREF(*kwds2);
     return -1;
 }
 
@@ -2375,6 +2474,47 @@
     return result;
 }
 
+static PyObject *__Pyx_GetStdout(void) {
+    PyObject *f = PySys_GetObject("stdout");
+    if (!f) {
+        PyErr_SetString(PyExc_RuntimeError, "lost sys.stdout");
+    }
+    return f;
+}
+
+static int __Pyx_PrintItem(PyObject *v) {
+    PyObject *f;
+    
+    if (!(f = __Pyx_GetStdout()))
+        return -1;
+    if (PyFile_SoftSpace(f, 1)) {
+        if (PyFile_WriteString(" ", f) < 0)
+            return -1;
+    }
+    if (PyFile_WriteObject(v, f, Py_PRINT_RAW) < 0)
+        return -1;
+    if (PyString_Check(v)) {
+        char *s = PyString_AsString(v);
+        Py_ssize_t len = PyString_Size(v);
+        if (len > 0 &&
+            isspace(Py_CHARMASK(s[len-1])) &&
+            s[len-1] != ' ')
+                PyFile_SoftSpace(f, 0);
+    }
+    return 0;
+}
+
+static int __Pyx_PrintNewline(void) {
+    PyObject *f;
+    
+    if (!(f = __Pyx_GetStdout()))
+        return -1;
+    if (PyFile_WriteString("\n", f) < 0)
+        return -1;
+    PyFile_SoftSpace(f, 0);
+    return 0;
+}
+
 static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb) {
     Py_XINCREF(type);
     Py_XINCREF(value);
@@ -2403,7 +2543,7 @@
     }
     if (PyString_Check(type))
         ;
-    else if (PyClass_Check(type))
+    else if (PyType_Check(type) || PyClass_Check(type))
         ; /*PyErr_NormalizeException(&type, &value, &tb);*/
     else if (PyInstance_Check(type)) {
         /* Raising an instance.  The value should be a dummy. */
